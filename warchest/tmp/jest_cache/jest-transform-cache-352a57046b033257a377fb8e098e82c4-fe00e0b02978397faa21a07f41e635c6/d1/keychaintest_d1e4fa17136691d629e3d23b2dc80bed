877eede7d20af37449468933da0ca61e
_getJestObj().mock('keytar');
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const keychain = require('../../src/core/keychain');
const keytar = require('keytar');
describe('core keychain', () => {
  test('saveKey and getKey use keytar', async () => {
    keytar.setPassword.mockResolvedValue();
    keytar.getPassword.mockResolvedValue('priv');
    await keychain.saveKey('ref', 'priv');
    expect(keytar.setPassword).toHaveBeenCalledWith('warchest', 'ref', 'priv');
    const priv = await keychain.getKey('ref');
    expect(priv).toBe('priv');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJqZXN0IiwicmVxdWlyZSIsImtleWNoYWluIiwia2V5dGFyIiwiZGVzY3JpYmUiLCJ0ZXN0Iiwic2V0UGFzc3dvcmQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImdldFBhc3N3b3JkIiwic2F2ZUtleSIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwicHJpdiIsImdldEtleSIsInRvQmUiXSwic291cmNlcyI6WyJrZXljaGFpbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGtleWNoYWluID0gcmVxdWlyZSgnLi4vLi4vc3JjL2NvcmUva2V5Y2hhaW4nKTtcbmNvbnN0IGtleXRhciA9IHJlcXVpcmUoJ2tleXRhcicpO1xuamVzdC5tb2NrKCdrZXl0YXInKTtcblxuZGVzY3JpYmUoJ2NvcmUga2V5Y2hhaW4nLCAoKSA9PiB7XG4gIHRlc3QoJ3NhdmVLZXkgYW5kIGdldEtleSB1c2Uga2V5dGFyJywgYXN5bmMgKCkgPT4ge1xuICAgIGtleXRhci5zZXRQYXNzd29yZC5tb2NrUmVzb2x2ZWRWYWx1ZSgpO1xuICAgIGtleXRhci5nZXRQYXNzd29yZC5tb2NrUmVzb2x2ZWRWYWx1ZSgncHJpdicpO1xuICAgIGF3YWl0IGtleWNoYWluLnNhdmVLZXkoJ3JlZicsICdwcml2Jyk7XG4gICAgZXhwZWN0KGtleXRhci5zZXRQYXNzd29yZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3dhcmNoZXN0JywgJ3JlZicsICdwcml2Jyk7XG4gICAgY29uc3QgcHJpdiA9IGF3YWl0IGtleWNoYWluLmdldEtleSgncmVmJyk7XG4gICAgZXhwZWN0KHByaXYpLnRvQmUoJ3ByaXYnKTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUVBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxRQUFRLENBQUM7QUFBQyxTQUFBRCxZQUFBO0VBQUE7SUFBQUU7RUFBQSxJQUFBQyxPQUFBO0VBQUFILFdBQUEsR0FBQUEsQ0FBQSxLQUFBRSxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBRnBCLE1BQU1FLFFBQVEsR0FBR0QsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ25ELE1BQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUdoQ0csUUFBUSxDQUFDLGVBQWUsRUFBRSxNQUFNO0VBQzlCQyxJQUFJLENBQUMsK0JBQStCLEVBQUUsWUFBWTtJQUNoREYsTUFBTSxDQUFDRyxXQUFXLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDdENKLE1BQU0sQ0FBQ0ssV0FBVyxDQUFDRCxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7SUFDNUMsTUFBTUwsUUFBUSxDQUFDTyxPQUFPLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQztJQUNyQ0MsTUFBTSxDQUFDUCxNQUFNLENBQUNHLFdBQVcsQ0FBQyxDQUFDSyxvQkFBb0IsQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQztJQUMxRSxNQUFNQyxJQUFJLEdBQUcsTUFBTVYsUUFBUSxDQUFDVyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ3pDSCxNQUFNLENBQUNFLElBQUksQ0FBQyxDQUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDO0VBQzNCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==